webpackJsonp([8],{jLke:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),s=a("Xxa5"),o=a.n(s),n=a("exGp"),l=a.n(n),u=a("vLgD"),c={name:"user",data:function(){return{loadingTable:!0,dialogFormTitle:"",dialogFormUrl:"",isEdit:!1,dialogFormVisible:!1,pageHeight:document.body.scrollHeight,logLoginTableData:[],queryData:{current_page:1,page_size:10,user_name:""},formRules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}]},formFieldsAdd:{id:0,user_name:"",descript:""},formFields:{}}},mounted:function(){this.getPageList()},methods:{getPageList:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingTable=!0,t.next=3,u.a.get("/apis/sysmgr/user/getPageList",e.queryData).then(function(t){e.logLoginTableData=t.data}).catch(function(t){e.logLoginTableData=[]}).finally(function(){e.loadingTable=!1});case 3:case"end":return t.stop()}},t,e)}))()},showAddUser:function(){this.formFields=i()(this.formFieldsAdd,{}),this.dialogFormTitle="添加用户",this.dialogFormUrl="/apis/sysmgr/user/add",this.dialogFormVisible=!0},showEditUser:function(e){if(this.formFields=e,null==this.formFields.id)return this.$message.error("请选择要编辑的用户！");this.dialogFormTitle="编辑用户",this.dialogFormUrl="/apis/sysmgr/user/update",this.dialogFormVisible=!0,this.isEdit=!0},addOrEditSubmit:function(e){var t,a=this;this.$refs[e].validate((t=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,u.a.post(a.dialogFormUrl,a.formFields).then(function(e){a.pageCurrentChange(1),a.dialogFormVisible=!1,a.$message.success("操作成功！")}).catch(function(e){});case 3:e.next=7;break;case 5:return console.log("error submit!!"),e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))},delUser:function(e){var t=this;if(this.formFields=e,null==this.formFields)return this.$message.error("请选择要删除的用户！");this.$confirm("确认删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.info(t.formFields),e.next=3,u.a.delete("/apis/sysmgr/user/delete",{id:t.formFields.id}).then(function(e){t.pageCurrentChange(1),t.$message.success("操作成功！")}).catch(function(e){});case 3:case"end":return e.stop()}},e,t)}))).catch(function(){})},pageSizeChange:function(e){this.queryData.page_size=e,this.getPageList()},pageCurrentChange:function(e){this.queryData.current_page=e,this.getPageList()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("div",{staticClass:"search-bar"},[a("el-form",{ref:"searchForm",attrs:{model:e.queryData,inline:!0}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.queryData.user_name,callback:function(t){e.$set(e.queryData,"user_name",t)},expression:"queryData.user_name"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.pageCurrentChange(1)}}},[e._v("搜索")])],1)],1),e._v(" "),a("el-card",{staticClass:"table-card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户管理")]),e._v(" "),a("ul",[a("li",{on:{click:e.showAddUser}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加\n        ")]),e._v(" "),a("li",{on:{click:function(t){return e.pageCurrentChange(1)}}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 刷新\n        ")])])]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}]},[a("el-table",{staticClass:"table-style",attrs:{"tooltip-effect":"dark",height:this.pageHeight-230,border:"",stripe:"",data:e.logLoginTableData.rows}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"user_name",label:"账号","min-width":"120",width:"auto"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"user_name",label:"账号","min-width":"120",width:"auto"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"时间",prop:"created","min-width":"180",width:"auto"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"descript",label:"描述",width:"auto","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"small"},on:{click:function(a){return e.showEditUser(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.delUser(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","pager-count":5,small:!0,"current-page":e.queryData.current_page,"page-sizes":[10,20,30,40,50,60,70,80,90],"page-size":e.logLoginTableData.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.logLoginTableData.count},on:{"size-change":e.pageSizeChange,"current-change":e.pageCurrentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,width:"460px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formFields",attrs:{model:e.formFields,formRules:e.formRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[a("el-input",{attrs:{disabled:e.isEdit,"auto-complete":"off"},model:{value:e.formFields.user_name,callback:function(t){e.$set(e.formFields,"user_name",t)},expression:"formFields.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"descript"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFields.descript,callback:function(t){e.$set(e.formFields,"descript",t)},expression:"formFields.descript"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrEditSubmit("formFields")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(e){a("s0uq")},null,null);t.default=m.exports},s0uq:function(e,t){}});
//# sourceMappingURL=8.a885f9453c70c38db8ad.js.map